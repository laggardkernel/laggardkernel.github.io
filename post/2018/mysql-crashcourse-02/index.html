<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>MySQLå¿…çŸ¥å¿…ä¼šï¼š11-20 - Home</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="laggardkernel" /><meta name="description" content="ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ä¸ªäººç¬”è®°ï¼Œä¸åšè§£è¯»ã€‚
" />






<meta name="generator" content="Hugo 0.87.0 with theme even" />


<link rel="canonical" href="https://blog.pseudocold.com/post/2018/mysql-crashcourse-02/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.fa20e845db068df5bd1b183f37f2c2b1ccb88d6fc052a3d6c4f63a682a4d6d4c.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="MySQLå¿…çŸ¥å¿…ä¼šï¼š11-20" />
<meta property="og:description" content="ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ä¸ªäººç¬”è®°ï¼Œä¸åšè§£è¯»ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.pseudocold.com/post/2018/mysql-crashcourse-02/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2018-03-29T23:47:06+08:00" />
<meta property="article:modified_time" content="2018-03-29T23:47:06+08:00" />

<meta itemprop="name" content="MySQLå¿…çŸ¥å¿…ä¼šï¼š11-20">
<meta itemprop="description" content="ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ä¸ªäººç¬”è®°ï¼Œä¸åšè§£è¯»ã€‚"><meta itemprop="datePublished" content="2018-03-29T23:47:06+08:00" />
<meta itemprop="dateModified" content="2018-03-29T23:47:06+08:00" />
<meta itemprop="wordCount" content="4816">
<meta itemprop="keywords" content="mysql," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="MySQLå¿…çŸ¥å¿…ä¼šï¼š11-20"/>
<meta name="twitter:description" content="ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ä¸ªäººç¬”è®°ï¼Œä¸åšè§£è¯»ã€‚"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Home</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/search/">
        <li class="mobile-menu-item">ğŸ”</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Home</a>
</div>

<nav class="site-navbar">
    
      <div class="top-progress-bar"></div>
    
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/search/">ğŸ”</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">MySQLå¿…çŸ¥å¿…ä¼šï¼š11-20</h1>

      <div class="post-meta">
        <span class="post-time"> 2018-03-29 </span>
        <div class="post-category">
            <a href="/categories/notes/"> Notes </a>
            </div>
          <span class="more-meta"> 4816 words </span>
          <span class="more-meta"> 10 mins read </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#chapter-11-ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°">Chapter 11: ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°</a></li>
    <li><a href="#chapter-12-æ±‡æ€»æ•°æ®">Chapter 12: æ±‡æ€»æ•°æ®</a></li>
    <li><a href="#chapter-13-åˆ†ç»„æ•°æ®">Chapter 13: åˆ†ç»„æ•°æ®</a>
      <ul>
        <li><a href="#æ’åºä¸åˆ†ç»„">æ’åºä¸åˆ†ç»„</a></li>
      </ul>
    </li>
    <li><a href="#chapter-14-ä½¿ç”¨å­å¥æŸ¥è¯¢">Chapter 14: ä½¿ç”¨å­å¥æŸ¥è¯¢</a></li>
    <li><a href="#chapter-15-åˆ›å»ºè”ç»“è¡¨-join">Chapter 15: åˆ›å»ºè”ç»“è¡¨ (join)</a></li>
    <li><a href="#chapter-16-åˆ›å»ºé«˜çº§è”ç»“">Chapter 16: åˆ›å»ºé«˜çº§è”ç»“</a></li>
    <li><a href="#chapter-17-ç»„åˆæŸ¥è¯¢">Chapter 17: ç»„åˆæŸ¥è¯¢</a></li>
    <li><a href="#chapter-18-å…¨æ–‡æœ¬æœç´¢">Chapter 18: å…¨æ–‡æœ¬æœç´¢</a></li>
    <li><a href="#chapter-19-æ’å…¥æ•°æ®">Chapter 19: æ’å…¥æ•°æ®</a></li>
    <li><a href="#chapter-20-æ›´æ–°å’Œåˆ é™¤æ•°æ®">Chapter 20: æ›´æ–°å’Œåˆ é™¤æ•°æ®</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>ã€ŠMySQLå¿…çŸ¥å¿…ä¼šã€‹ä¸ªäººç¬”è®°ï¼Œä¸åšè§£è¯»ã€‚</p>
<h2 id="chapter-11-ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°">Chapter 11: ä½¿ç”¨æ•°æ®å¤„ç†å‡½æ•°</h2>
<p>å‡½æ•°çš„å¯ç§»æ¤æ€§æ²¡æœ‰SQLå¼ºï¼Œ å› ä¸ºä¸åŒDBMSå®ç°çš„å‡½æ•°ä¸å¤§ç›¸åŒã€‚</p>
<p>å¸¸è§ SQL å‡½æ•°</p>
<ul>
<li>å¤„ç†æ–‡æœ¬ä¸²ï¼›</li>
<li>ç®—æœ¯æ“ä½œ (ç»å¯¹å€¼ï¼Œä»£æ•°è¿ç®—)ï¼›</li>
<li>å¤„ç†æ—¥æœŸå’Œæ—¶é—´å€¼ï¼Œä»¥åŠä»å…¶ä¸­æå–ç‰¹å®šæˆåˆ†ï¼›</li>
<li>è¿”å› DBMS çš„ç‰¹æ®Šä¿¡æ¯ (ç™»å½•ä¿¡æ¯ï¼Œç‰ˆæœ¬ç»†èŠ‚ï¼›</li>
</ul>
<p>æ–‡æœ¬å¤„ç†</p>
<ul>
<li><code>Left()</code>, <code>Right()</code>ï¼Œè¿”å›ä¸²å·¦ã€å³å­—ç¬¦ï¼›</li>
<li><code>Length()</code></li>
<li><code>Locate(string,col_name)</code>ï¼Œæ‰¾å‡ºä¸²çš„ä¸€ä¸ªå­ä¸²ï¼›</li>
<li><code>Lower()</code>, <code>Upper()</code>ï¼Œå¤§å°å†™è½¬æ¢</li>
<li><code>LTrim()</code>, <code>Rtrim()</code></li>
<li><code>Substring()</code>ï¼Œè¿”å›å­ä¸²çš„å­—ç¬¦ï¼Œè¿˜æ²¡æ˜ç™½æ€ä¹ˆç”¨ï¼›</li>
<li><code>Soundex()</code>ï¼ŒSOUNDEX æ˜¯ä¸€ä¸ªå°†ä»»ä½•æ–‡æœ¬ä¸²è½¬æ¢ä¸ºæè¿°å…¶è¯­éŸ³è¡¨ç¤ºçš„å­—æ¯æ•°å­—æ¨¡å¼çš„ç®—æ³•ã€‚SOUNDEX è€ƒè™‘äº†ç±»ä¼¼çš„å‘éŸ³å­—ç¬¦å’ŒéŸ³èŠ‚ï¼Œä½¿å¾—èƒ½å¯¹ä¸²è¿›è¡Œå‘éŸ³æ¯”è¾ƒè€Œä¸æ˜¯å­—æ¯æ¯”è¾ƒã€‚
<ul>
<li><code>where soundex(cust_contact) = soundex('Y. Lie');</code></li>
</ul>
</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">soundex</span><span class="p">(</span><span class="n">cust_contact</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">soundex</span><span class="p">(</span><span class="s1">&#39;Y. Lie&#39;</span><span class="p">);</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>æ—¶é—´å’Œæ—¥æœŸå¤„ç†</p>
<ul>
<li>ä¸ç®¡æ˜¯æ’å…¥æˆ–æ›´æ–°è¡¨å€¼è¿˜æ˜¯ç”¨ <code>WHERE</code> å­å¥è¿›è¡Œè¿‡æ»¤ï¼Œæ—¥æœŸå¿…é¡»ä¸ºæ ¼å¼ <code>yyyy-mm-dd</code>ã€‚</li>
<li>æ£€ç´¢æŸæœˆçš„è®¢å•
<ul>
<li><code>where date(order_date) between '2005-09-01' and '2015-09-30';</code></li>
<li><code>where year(order_date) = 2005 and month(order_date) = 9;</code></li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>å‡½æ•°</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>AddDate()</code></td>
<td>å¢åŠ ä¸€ä¸ªæ—¥æœŸï¼ˆå¤©ã€å‘¨ç­‰ï¼‰</td>
</tr>
<tr>
<td><code>AddTime()</code></td>
<td>å¢åŠ ä¸€ä¸ªæ—¶é—´ï¼ˆæ—¶ã€åˆ†ç­‰ï¼‰</td>
</tr>
<tr>
<td><code>CurDate()</code></td>
<td>è¿”å›å½“å‰æ—¥æœŸ</td>
</tr>
<tr>
<td><code>CurTime()</code></td>
<td>è¿”å›å½“å‰æ—¶é—´</td>
</tr>
<tr>
<td><code>Date()</code></td>
<td>è¿”å›æ—¥æœŸæ—¶é—´çš„æ—¥æœŸéƒ¨åˆ†</td>
</tr>
<tr>
<td><code>DateDiff()</code></td>
<td>è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹å·®</td>
</tr>
<tr>
<td><code>Date_Add()</code></td>
<td>é«˜åº¦çµæ´»çš„æ—¥æœŸè¿ç®—å‡½æ•°</td>
</tr>
<tr>
<td><code>Date_Format()</code></td>
<td>è¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ—¥æœŸæˆ–æ—¶é—´ä¸²</td>
</tr>
<tr>
<td><code>Day()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¤©æ•°éƒ¨åˆ†</td>
</tr>
<tr>
<td><code>DayOfWeek()</code></td>
<td>å¯¹äºä¸€ä¸ªæ—¥æœŸï¼Œè¿”å›å¯¹åº”çš„æ˜ŸæœŸå‡ </td>
</tr>
<tr>
<td><code>Hour()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„å°æ—¶éƒ¨åˆ†</td>
</tr>
<tr>
<td><code>Minute()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„åˆ†é’Ÿéƒ¨åˆ†</td>
</tr>
<tr>
<td><code>Month()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„æœˆä»½éƒ¨åˆ†</td>
</tr>
<tr>
<td><code>Now()</code></td>
<td>è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´</td>
</tr>
<tr>
<td><code>Second()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¶é—´çš„ç§’éƒ¨åˆ†</td>
</tr>
<tr>
<td><code>Time()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¥æœŸæ—¶é—´çš„æ—¶é—´éƒ¨åˆ†</td>
</tr>
<tr>
<td><code>Year()</code></td>
<td>è¿”å›ä¸€ä¸ªæ—¥æœŸçš„å¹´ä»½éƒ¨åˆ†</td>
</tr>
</tbody>
</table>
<p>æ³¨ï¼š<code>Date()</code>, <code>Time()</code> åœ¨ MySQL 4.1.1 ä¸­å¼•å…¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="p">,</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="nb">Date</span><span class="p">(</span><span class="n">order_date</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2005-09-01&#39;</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- where order_date = &#39;2005-09-01&#39; æ— æ³•ä¿è¯æ—¶é—´ä¸º 00:00:00
</span></code></pre></td></tr></table>
</div>
</div><p>æ•°å€¼å¤„ç†å‡½æ•°</p>
<ul>
<li><code>Abs()</code></li>
<li><code>Cos()</code></li>
<li><code>Exp()</code>ï¼Œè¿”å›æŒ‡æ•°å€¼ï¼›</li>
<li><code>Mod()</code>ï¼Œè¿”å›é™¤æ³•æ“ä½œçš„ä½™æ•°ï¼›</li>
<li><code>Pi()</code></li>
<li><code>Rand()</code>ï¼Œè¿”å›ä¸€ä¸ªéšæœºæ•° 0-1ï¼›</li>
<li><code>Sin()</code></li>
<li><code>Sqrt()</code></li>
<li><code>Tan()</code></li>
</ul>
<h2 id="chapter-12-æ±‡æ€»æ•°æ®">Chapter 12: æ±‡æ€»æ•°æ®</h2>
<p>æ±‡æ€»æ•°æ®ï¼Œè€Œä¸å¿…å®é™…æ£€ç´¢å‡ºæ¯æ¡æ•°æ®</p>
<ul>
<li>è¡Œæ•°</li>
<li>è¡Œç»„ä¹‹å’Œ</li>
<li>åˆ—çš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€å¹³å‡å€¼</li>
</ul>
<p>èšé›†å‡½æ•° (aggregate function)ï¼šè¿è¡Œåœ¨è¡Œç»„ä¸Šï¼Œè¿”å›å•ä¸ªå€¼å¾—å‡½æ•°ï¼›</p>
<ul>
<li><code>AVG()</code>, <code>select avg(prod_price) as avg_price from products;</code>
<ul>
<li><code>AVG()</code> å‡½æ•°å¿½ç•¥å€¼ä¸º <code>NULL</code> çš„è¡Œï¼Œæ­¤è¡Œä¸å‚ä¸å¹³å‡å€¼è®¡ç®—ï¼›</li>
</ul>
</li>
<li><code>COUNT()</code>ï¼Œè¡Œæ•°ï¼›
<ul>
<li><code>count(*)</code> ä¸å¿½ç•¥ç©ºå€¼è¡Œï¼Œå¯¹è¡¨ä¸­è¡Œæ•°è®¡æ•°ï¼›</li>
<li><code>count(column)</code> å¯¹ç‰¹å®šåˆ—ä¸­å…·æœ‰å€¼å¾—è¡Œè®¡æ•°ï¼Œå¿½ç•¥ç©ºå€¼ <code>null</code> è¡Œï¼›</li>
</ul>
</li>
<li><code>MAX()</code>, <code>MIN()</code>. å¯ä»¥ä½œç”¨åœ¨æ–‡æœ¬ä¸²ä¸Šï¼›</li>
<li><code>SUM()</code>ï¼ŒæŸåˆ—æ•°æ®æ€»å€¼ï¼›
<ul>
<li><code>sum()</code> ä¸ä»…å¯ä»¥ä½œç”¨åœ¨å•åˆ—ä¸Šï¼Œä¹Ÿå¯åˆè®¡è®¡ç®—å€¼ï¼š<code>select sum(item_price*quantity) as total_price</code>ï¼›</li>
</ul>
</li>
</ul>
<p>èšé›†ä¸åŒå€¼ (<code>DISTINCT</code>, MySQL 5.0+)</p>
<ul>
<li><code>ALL</code> ä¸ºé»˜è®¤è¡Œè®¡ç®—è¡Œä¸º(ä¸DISTINCTå¯¹åº”)ï¼Œå³æŸåˆ—ä¸­æ‰€æœ‰é¡¹å‡è€ƒè™‘åœ¨å†…ï¼›</li>
<li><code>DISTINCT</code>ï¼Œè¡Œè®¡ç®—æ—¶ï¼Œåªè€ƒè™‘åˆ—ä¸­ä¸åŒçš„å€¼ï¼›
<ul>
<li><code>select avg(distinct prod_price) as avg_price</code></li>
<li><code>distinct</code> åªèƒ½ç”¨äº <code>count()</code> è€Œé <code>count(*)</code>ï¼Œå¦‚ <code>select count(distinct prod_price)</code></li>
</ul>
</li>
</ul>
<p>ç»„åˆèšé›†å‡½æ•°ï¼Œåˆ©ç”¨å¤šä¸ªèšé›†å‡½æ•°é’ˆå¯¹ä¸åŒåˆ—ï¼Œè¾“å‡ºå¤šä¸ªéåŸºæœ¬æ•°æ®åˆ—ï¼›</p>
<p>èšé›†å‡½æ•°è¢«è®¾è®¡å¾—é«˜æ•ˆï¼Œåœ¨æœåŠ¡ç«¯æ±‡æ€»ï¼Œæ¯”è·å–æ•°æ®ååœ¨å®¢æˆ·æœºè®¡ç®—è¦å¿«å¾—å¤šã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="n">prod_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1003</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">item_ordered</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20005</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- sum è®¡ç®—å‡½æ•°
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">item_price</span><span class="o">*</span><span class="n">quantity</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">total_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">20005</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">avg</span><span class="p">(</span><span class="k">distinct</span><span class="w"> </span><span class="n">prod_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">avg_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="n">wherer</span><span class="w"> </span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1003</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">num_items</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="k">min</span><span class="p">(</span><span class="n">prod_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">price_min</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="k">max</span><span class="p">(</span><span class="n">prod_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">price_max</span><span class="p">,</span><span class="w">
</span><span class="w">    </span><span class="k">avg</span><span class="p">(</span><span class="n">prod_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">price_avg</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-13-åˆ†ç»„æ•°æ®">Chapter 13: åˆ†ç»„æ•°æ®</h2>
<p>æ•°æ®åˆ†ç»„ï¼šåˆ’åˆ†å¤šä¸ªé€»è¾‘ç»„ï¼›</p>
<p><code>GROUP BY</code> åˆ†ç»„</p>
<ul>
<li><code>group by</code> å­å¥å¯ä»¥åŒ…å«ä»»æ„æ•°ç›®çš„åˆ—ï¼Œ å³<strong>åµŒå¥—åˆ†ç»„</strong>ï¼›</li>
<li>åµŒå¥—åˆ†ç»„æ—¶ï¼Œæ•°æ®æ±‡æ€»å‘ç”Ÿåœ¨æœ€åè§„å®šçš„åˆ—ä¸Šï¼Œå³åœ¨æœ€åº•å±‚åˆ†ç»„æ±‡æ€»ï¼›</li>
<li><code>group by</code> å­å¥ä¸­çš„åˆ—å¿…é¡»æ˜¯æ£€æ‰€åˆ—æˆ–è€…æœ‰æ•ˆçš„è¡¨è¾¾å¼ï¼Œä½†ä¸èƒ½æ˜¯èšé›†å‡½æ•°ï¼›</li>
<li><code>null</code> è¢«åˆ†ä¸ºä¸€ç»„ï¼›</li>
<li><code>group by</code> å¿…é¡»åœ¨ <code>where</code> å­å¥ä¹‹åï¼Œ<code>order by</code> å­å¥ä¹‹å‰ï¼›</li>
<li><code>WITH ROLLUP</code> å…³é”®å­—ï¼Œè¾“å‡ºæ¯å±‚åˆ†ç»„çš„æ±‡æ€»çº§åˆ«ï¼›</li>
<li><code>group by</code> é™åˆ¶äº†èšé›†å‡½æ•°çš„è®¡ç®—èŒƒå›´ï¼›</li>
</ul>
<p><code>HAVING</code> è¿‡æ»¤åˆ†ç»„</p>
<ul>
<li><code>where</code> è¿‡æ»¤æŒ‡å®šè¡Œè€Œä¸æ˜¯åˆ†ç»„ï¼›</li>
<li><code>where</code> åœ¨åˆ†ç»„<strong>å‰</strong>è¿‡æ»¤è¡Œï¼Œ<code>having</code> åœ¨åˆ†ç»„<strong>å</strong>è¿‡æ»¤åˆ†ç»„ã€‚<code>where</code>æ’é™¤çš„è¡Œä¸ä¼šå‡ºç°åœ¨åˆ†ç»„ä¸­ã€‚</li>
<li>eg: <code>group by vend_id having count(*)&gt;=2;</code></li>
<li>å¯ä»¥ä½¿ç”¨åˆ«åç­›é€‰ï¼›</li>
</ul>
<h3 id="æ’åºä¸åˆ†ç»„">æ’åºä¸åˆ†ç»„</h3>
<table>
<thead>
<tr>
<th>ORDER BY</th>
<th>GROUP BY</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ’åºäº§ç”Ÿçš„è¾“å‡º</td>
<td>åˆ†ç»„è¡Œã€‚ä½†è¾“å‡ºå¯èƒ½ä¸æ˜¯åˆ†ç»„çš„é¡ºåº</td>
</tr>
<tr>
<td>ä»»æ„åˆ—éƒ½å¯ä»¥ä½¿ç”¨ï¼ˆç”šè‡³éé€‰æ‹©çš„åˆ—ä¹Ÿå¯ä»¥ä½¿ç”¨ï¼‰</td>
<td>åªå¯èƒ½ä½¿ç”¨é€‰æ‹©åˆ—æˆ–è¡¨è¾¾å¼åˆ—ï¼Œè€Œä¸”å¿…é¡»ä½¿ç”¨æ¯ä¸ªé€‰æ‹©åˆ—è¡¨è¾¾å¼</td>
</tr>
<tr>
<td>ä¸ä¸€å®šéœ€è¦</td>
<td>å¦‚æœä¸èšé›†å‡½æ•°ä¸€èµ·ä½¿ç”¨åˆ—ï¼ˆæˆ–è¡¨è¾¾å¼ï¼‰ï¼Œåˆ™å¿…é¡»ä½¿ç”¨</td>
</tr>
</tbody>
</table>
<p><code>GROUP BY</code>å¹¶ä¸èƒ½ä¿è¯æŒ‰ç…§åˆ†ç»„é¡ºåºè¾“å‡ºã€‚</p>
<p><code>select</code> å­å¥é¡ºåº</p>
<ol>
<li><code>select</code></li>
<li><code>from</code></li>
<li><code>where</code></li>
<li><code>group by</code></li>
<li><code>having</code></li>
<li><code>order by</code></li>
<li><code>limit</code></li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">vend_id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">num_prods</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">vend_id</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">num_orders</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w">
</span><span class="w"></span><span class="c1">-- or having num_orders &gt;= 2;
</span><span class="c1"></span><span class="w">
</span><span class="w"></span><span class="c1">-- order by ordertotal
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">order_num</span><span class="p">,</span><span class="w"> </span><span class="k">sum</span><span class="p">(</span><span class="n">quantity</span><span class="o">*</span><span class="n">item_price</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ordertotal</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w">
</span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">having</span><span class="w"> </span><span class="n">ordertotal</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">50</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-14-ä½¿ç”¨å­å¥æŸ¥è¯¢">Chapter 14: ä½¿ç”¨å­å¥æŸ¥è¯¢</h2>
<p>å­æŸ¥è¯¢ (<em>subquery</em>)ï¼ŒåµŒå¥—åœ¨å…¶ä»–æŸ¥è¯¢ä¹‹ä¸­çš„æŸ¥è¯¢</p>
<ul>
<li><code>select sth from somewhere where sth in (select ...)</code></li>
<li>ä½¿ç”¨å­æŸ¥è¯¢å¹¶ä¸ä¸€å®šæ˜¯æœ€æœ‰æ•ˆçš„æ–¹å¼ï¼Œæœ‰æ—¶å€™è”ç»“æ˜¯ä¸€ç§æ›´ä¼˜é›…çš„è§£å†³åŠæ³•ï¼›</li>
<li>ç”±äºæ€§èƒ½é™åˆ¶ï¼Œä¸èƒ½åµŒå¥—å¤ªå¤šå­æŸ¥è¯¢</li>
<li>å­æŸ¥è¯¢whereè¯­å¥éœ€è¦ä½¿ç”¨å®Œå…¨é™å®šå</li>
</ul>
<p>ç›¸å…³å­æŸ¥è¯¢ (correlated subquery)ï¼Œæ¶‰åŠå¤–éƒ¨æŸ¥è¯¢çš„å­æŸ¥è¯¢ï¼›</p>
<ul>
<li>å¦‚ï¼Œå­æŸ¥è¯¢è¯­å¥ä¸­å­˜åœ¨å¤–å±‚æŸ¥è¯¢åˆ—åï¼›</li>
</ul>
<p>å­æŸ¥è¯¢ç¼–å†™æ—¶ï¼Œæœ€å¥½ä»å†…å±‚åˆ°å¤–å±‚ä¾æ¬¡æµ‹è¯•ï¼Œæœ€åå»ºç«‹ä¸€ä¸ªå­æŸ¥è¯¢è¯­å¥ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="w">
</span><span class="w">  </span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- å¯¹è®¡ç®—å­—æ®µè¿›è¡Œå­æŸ¥è¯¢ï¼šå®¢æˆ·è®¢å•æ•°é‡
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_state</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="w">
</span><span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">customers</span><span class="p">.</span><span class="n">cust_id</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">cust_name</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-15-åˆ›å»ºè”ç»“è¡¨-join">Chapter 15: åˆ›å»ºè”ç»“è¡¨ (join)</h2>
<p>å¤–é”® (foreign key)ï¼ŒæŸä¸ªè¡¨ä¸­åŒ…å«å¦ä¸€ä¸ªè¡¨ä¸­ä¸»é”®çš„åˆ—ï¼›</p>
<p>å…³ç³»æ•°æ®å¯ä»¥æœ‰æ•ˆåœ°å­˜å‚¨å’Œæ–¹ä¾¿åœ°å¤„ç†ã€‚å› æ­¤ï¼Œå…³ç³»æ•°æ®åº“çš„å¯ä¼¸ç¼©æ€§è¿œæ¯”éå…³ç³»æ•°æ®åº“è¦å¥½ã€‚</p>
<p>è”ç»“æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥åœ¨ä¸€æ¡SELECT è¯­å¥ä¸­å…³è”è¡¨ï¼Œå› æ­¤ç§°ä¹‹ä¸ºè”ç»“ã€‚</p>
<blockquote>
<p>è”ç»“ä¸æ˜¯ç‰©ç†å®ä½“ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒåœ¨å®é™…çš„æ•°æ®åº“è¡¨ä¸­ä¸å­˜åœ¨ã€‚è”ç»“ç”±MySQLæ ¹æ®éœ€è¦å»ºç«‹ï¼Œå®ƒå­˜åœ¨äºæŸ¥è¯¢çš„æ‰§è¡Œå½“ä¸­ã€‚</p>
</blockquote>
<p>åˆ›å»ºè”ç»“</p>
<ul>
<li><code>select ... from table1,table2 where table1.col=table2.col ...;</code></li>
<li>ç¬›å¡å°”ç§¯ (cartesian product)ï¼Œç”±æ²¡æœ‰è”ç»“æ¡ä»¶çš„è¡¨å…³ç³»è¿”å›çš„ç»“æœï¼Œçº¯ç²¹å¤šä¸ªè¡¨çš„ç»„åˆè¾“å‡ºï¼Œå…¶è¡Œæ•°ä¸ºå¤šä¸ªè¡¨çš„è¡Œæ•°ä¹‹ç§¯ï¼›ç¬›å¡å°”ç§¯çš„è”ç»“ç±»å‹åˆç§°å‰è”ç»“ï¼›</li>
<li><strong>è”ç»“æ—¶æ€»æ˜¯æä¾›è”ç»“æ¡ä»¶</strong>ï¼Œå¦åˆ™äº§ç”Ÿç¬›å¡å°”ç§¯ï¼›</li>
<li>å†…éƒ¨é“¾æ¥ / ç­‰å€¼è”ç»“ (equijoin)ï¼Œ<code>inner join ... on ...</code>
<ul>
<li><code>select ... from table1 inner join table2 on table1.col=table2.col;</code></li>
<li>ç­‰å€¼è”ç»“å¤šä¸ªè¡¨æ—¶å­˜åœ¨é¡ºåºé—®é¢˜ï¼š<code>inner join</code> è”ç»“è¡¨ä¹‹å‰ä¸å¯ä»¥å°†è¡¨åˆ—åå‚ä¸ç­‰å€¼æ¡ä»¶åˆ¤æ–­ï¼›</li>
<li>è”ç»“å¤šä¸ªè¡¨æ—¶<strong>ä¸æ¨è</strong>ä½¿ç”¨ <code>inner join ... on ...</code>ï¼Œæ­¤æ³•ä¹¦å†™æ—¶è¦æ³¨æ„é¡ºåºï¼Œè€Œä¸”ç›¸å¯¹ <code>from table1, table2[, table3] where</code> æ¡ä»¶è”ç»“ï¼Œä¹¦å†™æ›´é•¿ï¼›</li>
</ul>
</li>
<li>æŸ¥è¯¢æ—¶è‹¥è”ç»“ä¸­çš„è¡¨å…·æœ‰ç›¸åŒåˆ—åï¼Œä¸ºé¿å…æ··æ·†ï¼ŒæŸ¥è¯¢å…±æœ‰åˆ—åæ—¶å¿…é¡»æŒ‡å®šå…¨åï¼›</li>
</ul>
<p>é€‰æ‹©è´­ä¹° <code>prod_id='TNT2'</code> çš„å®¢æˆ·ä¿¡æ¯ <code>cust_name</code> å’Œ <code>cust_contact</code>ã€‚</p>
<ol>
<li>ä» <code>oreritems</code> è¡¨æŸ¥æ‰¾è´­ä¹° <code>prod_id='TNT2'</code> çš„è®¢å•å· <code>order_num</code>ï¼›</li>
<li>ç”±è®¢å•å· <code>order_num</code> ä» <code>orders</code> è¡¨æŸ¥æ‰¾è´­ä¹°ç”¨æˆ· <code>cust_id</code>ï¼›</li>
<li>æ ¹æ®ç”¨æˆ· ID<code>cust_id</code>ï¼Œåœ¨ <code>customers</code> è¡¨ä¸­æ£€ç´¢å‡ºç”¨æˆ·ä¿¡æ¯ï¼›</li>
<li>å€’ç€æ•´ç†ä¸€ä¸‹ï¼Œå®¢æˆ·ä¿¡æ¯éœ€è¦ä» <code>customers</code> è¡¨æ£€ç´¢å®¢æˆ· ID<code>cust_id</code>ï¼Œè€Œå®¢æˆ· ID<code>cust_id</code> éœ€è¦åœ¨ <code>orders</code> è¡¨æ»¡è¶³è¿™æ ·çš„è®¢å•å·æ¡ä»¶ <code>order_num</code>ï¼Œè¿™äº›è®¢å•å· <code>order_num</code> åœ¨ <code>orderitems</code> è¡¨ä¸­è¦æ±‚è®¢å•åŒ…å«äº†å•†å“ <code>prod_id = 'TNT2'</code>ã€‚</li>
</ol>
<p><code>inner join &lt;table&gt; on</code>è¯­æ³•ï¼ŒANSI SQLè§„èŒƒï¼Œä½†æ˜¯å†™èµ·æ¥ä¸æ–¹ä¾¿ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">vend_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_price</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">vendors</span><span class="p">,</span><span class="w"> </span><span class="n">producst</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">vendors</span><span class="p">.</span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">vend_id</span><span class="w"> </span><span class="c1">-- éæ˜ç¡®çš„è”ç»“è¯­æ³•
</span><span class="c1"></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">vend_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_name</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">vend_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_name</span><span class="p">,</span><span class="w"> </span><span class="n">prod_price</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">vendors</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">products</span><span class="w">
</span><span class="w"></span><span class="k">on</span><span class="w"> </span><span class="n">vendors</span><span class="p">.</span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">products</span><span class="p">.</span><span class="n">vend_id</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>å¤šçº§selectå­å¥ v.s. whereå¤šä¸ªè”ç»“ v.s. inner joinå¤šä¸ªè”ç»“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="p">,</span><span class="w"> </span><span class="n">orderitems</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">customers</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">cust_id</span><span class="w">
</span><span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">orderitems</span><span class="p">.</span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">order_num</span><span class="w">
</span><span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">customers</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">cust_id</span><span class="w">
</span><span class="w"></span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">orders</span><span class="p">.</span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">orderitems</span><span class="p">.</span><span class="n">order_num</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">cust_id</span><span class="w">
</span><span class="w">                  </span><span class="k">from</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">order_num</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">order_num</span><span class="w">
</span><span class="w">                                                  </span><span class="k">from</span><span class="w"> </span><span class="n">orderitems</span><span class="w">
</span><span class="w">                                                  </span><span class="k">where</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="p">));</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-16-åˆ›å»ºé«˜çº§è”ç»“">Chapter 16: åˆ›å»ºé«˜çº§è”ç»“</h2>
<p>è¡¨åˆ«å <code>from customers as c</code>ï¼Œå¤§å¹…ç®€åŒ– <code>where</code> æ¡ä»¶åˆ¤æ–­çš„ä¹¦å†™ï¼›å‰é¢å·²ç»ä»‹ç»äº†<code>select as</code>ç”¨æ³•ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="n">cust_contact</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">o</span><span class="p">,</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">oi</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">cust_id</span><span class="w">
</span><span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oi</span><span class="p">.</span><span class="n">order_num</span><span class="w">
</span><span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;TNT2&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>è‡ªè”ç»“</p>
<ul>
<li>ä»å½“å‰è¡¨å–å‡ºä¿¡æ¯æ¥ç­›é€‰ï¼Œå¦‚å½“å‰è¡¨ä¸­ <code>prod_id = 'DTNTR'</code> ç”Ÿäº§å•†çš„æ‰€æœ‰äº§å“ã€‚</li>
<li>è‡ªè”ç»“æ—¶å¤šä¸ªç›¸åŒè¡¨è¦ä½¿ç”¨åˆ«åæ¥åŒºåˆ†ã€‚åˆ—åä¹Ÿè¦ä½¿ç”¨<strong>åˆ—å…¨å</strong>æ¥åŒºåˆ†ä»å“ªä¸ªè¡¨ä¸­æ£€ç´¢ï¼›</li>
<li>è‡ªè”ç»“ä¸å­æŸ¥è¯¢çš„å¤„ç†é€Ÿåº¦ä¸åŒï¼Œå¿…è¦æ—¶å¯ä»¥æ¯”è¾ƒäºŒè€…æ•ˆç‡ï¼Œæ‹©ä¼˜ä½¿ç”¨ï¼›</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- æŸ¥è¯¢äº§å“ DTNTR ä¾›åº”å•†æ‰€æä¾›çš„æ‰€æœ‰äº§å“
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">prod_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_name</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="n">vend_id</span><span class="w">
</span><span class="w">                 </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w">
</span><span class="w">                 </span><span class="k">where</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;DTNTR&#39;</span><span class="p">);</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">prod_id</span><span class="p">,</span><span class="n">p1</span><span class="p">.</span><span class="n">prod_name</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">p2</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">p1</span><span class="p">.</span><span class="n">vend_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">vend_id</span><span class="w">
</span><span class="w">  </span><span class="k">and</span><span class="w"> </span><span class="n">p2</span><span class="p">.</span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;DTNTR&#39;</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>è‡ªç„¶è”ç»“ï¼šæ’é™¤å¤šä¸ªè¡¨ä¸­ç›¸åŒåˆ—å¤šæ¬¡å‡ºç°(äººå·¥æ’é™¤)ï¼›</p>
<ul>
<li>å¯¹è¡¨æŸ¥è¯¢ä½¿ç”¨ <code>select table1.*</code>ï¼Œå¯¹å…¶ä»–è¡¨æ˜ç¡®çš„å­å¥æŸ¥è¯¢åˆ—ã€‚å…¶å®è¿˜æ˜¯æ‰‹åŠ¨é€‰æ‹©ä¸é‡å¤çš„åˆ—å‡ºæ¥ï¼›</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">order_num</span><span class="p">,</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">order_date</span><span class="p">,</span><span class="w"> </span><span class="n">oi</span><span class="p">.</span><span class="n">prod_id</span><span class="p">,</span><span class="w"> </span><span class="n">oi</span><span class="p">.</span><span class="n">quantity</span><span class="p">,</span><span class="w"> </span><span class="n">oi</span><span class="p">.</span><span class="n">item_price</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="p">,</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">o</span><span class="p">,</span><span class="w"> </span><span class="n">orderitems</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">oi</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">oi</span><span class="p">.</span><span class="n">order_num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">order_num</span><span class="w"> </span><span class="k">and</span><span class="w"> </span><span class="n">prod_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;FB&#39;</span><span class="err">\</span><span class="k">G</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p><strong>æ³¨</strong>ï¼šè¡¨æ ¼è¾“å‡ºè¡Œè¿‡é•¿æ—¶ï¼Œä½¿ç”¨ <code>\G</code>(å¤§å†™) è€Œé <code>;</code> ç»“å°¾ï¼Œå¯ä»¥å–æ¶ˆè¡¨æ ¼è¾“å‡ºï¼›</p>
<p>å¤–éƒ¨è”ç»“ï¼šè”ç»“åŒ…å«äº†é‚£äº›åœ¨ç›¸å…³è¡¨ä¸­<strong>æ²¡æœ‰å…³è”è¡Œ</strong>çš„è¡Œï¼›</p>
<ul>
<li>å¦‚ï¼Œè¡¨ 1 ä¸­çš„æŸåˆ—ä¿¡æ¯ï¼Œåœ¨è¡¨ 2 ä¸­åˆ— 2 æ²¡æœ‰å¯¹åº”å€¼ï¼Œå³å€¼ä¸º <code>null</code>ï¼›</li>
<li><code>from table1 left outer join table2 on ...;</code></li>
<li><code>left outer join</code> è¡¨ç¤ºä»å·¦è¾¹çš„è¡¨é€‰æ‹©æ‰€æœ‰çš„è¡Œï¼›</li>
<li>å†…éƒ¨è”ç»“ä¸èƒ½æ£€ç´¢å‡ºæ²¡æœ‰å…³è”è¡Œçš„è¡Œï¼Œå¤–éƒ¨è”ç»“å¯ä»¥æ£€ç´¢å‡ºæ²¡æœ‰å€¼ï¼Œæˆ–è€…è¯´å€¼ä¸º <code>null</code> çš„è¡Œï¼›</li>
</ul>
<p>MySQLä¸æ”¯æŒç®€åŒ–å­—ç¬¦ <code>*=</code> å’Œ <code>=*</code> çš„ä½¿ç”¨ï¼Œè¿™ä¸¤ç§æ“ä½œç¬¦åœ¨å…¶ä»–DBMSä¸­æ˜¯å¾ˆæµè¡Œçš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="c1">-- å¸¦èšé›†å‡½æ•°çš„è”ç»“
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_name</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">,</span><span class="w"> </span><span class="k">count</span><span class="p">(</span><span class="n">o</span><span class="p">.</span><span class="n">order_num</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">ord_num</span><span class="w">
</span><span class="w"></span><span class="k">from</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">inner</span><span class="w"> </span><span class="k">join</span><span class="w"> </span><span class="n">orders</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">o</span><span class="w">
</span><span class="w"></span><span class="k">on</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">o</span><span class="p">.</span><span class="n">cust_id</span><span class="w">
</span><span class="w"></span><span class="k">group</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">cust_id</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-17-ç»„åˆæŸ¥è¯¢">Chapter 17: ç»„åˆæŸ¥è¯¢</h2>
<p>åˆç§°å¹¶ (union)ï¼Œæˆ–å¤åˆæŸ¥è¯¢ (compound query)ã€‚</p>
<p>ä½¿ç”¨åœºåˆ</p>
<ul>
<li>åœ¨å•ä¸ªæŸ¥è¯¢ä¸­ä»ä¸åŒçš„è¡¨è¿”å›ç±»ä¼¼ç»“æ„çš„æ•°æ®ï¼›</li>
<li>å¯¹å•ä¸ªè¡¨æ‰§è¡Œå¤šä¸ª <code>select</code> æŸ¥è¯¢ï¼ŒæŒ‰å•ä¸ªæŸ¥è¯¢è¿”å›ç»“æœï¼›</li>
<li>å¤šæ•°æƒ…å†µä¸‹ç»„åˆæŸ¥è¯¢ <code>union</code> å’Œå¤šä¸ª <code>where</code> æ¡ä»¶ç­›é€‰å¯ä»¥è¾¾åˆ°ç›¸åŒçš„ç›®çš„ï¼Œä½†ä¸¤ç§æŠ€æœ¯çš„æ€§èƒ½ä¸åŒï¼Œæ ¹æ®æƒ…å†µæ‹©ä¼˜ä½¿ç”¨ï¼›</li>
</ul>
<p><code>UNION</code> åˆ›å»ºç»„åˆæŸ¥è¯¢</p>
<ul>
<li><code>select ... union select ...</code></li>
<li><code>union</code> å¿…é¡»æœ‰ä¸¤æ¡æˆ–ä»¥ä¸Šè¯­å¥ç»„æˆï¼›</li>
<li><code>union</code> ä¸­æ¯ä¸ªæŸ¥è¯¢å¿…é¡»åŒ…å«ç›¸åŒçš„åˆ—ã€è¡¨è¾¾å¼æˆ–èšé›†å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>è¾“å‡ºå†…å®¹ç§ç±»ç›¸åŒ</strong>ã€‚å®é™…ä¸Šä¸ <code>and</code> å¯¹åº”çš„ä¸€ç§é€»è¾‘å˜›ï¼›</li>
<li><strong><code>union</code> é»˜è®¤åˆ é™¤ä¸¤ä¸ªæŸ¥è¯¢è¯­å¥ä¸­é‡å¤è¡Œ</strong>ï¼Œä½¿ç”¨ <code>union all</code> å¯ä»¥è¿”å›æ‰€æœ‰åŒ¹é…è¡Œï¼›</li>
<li>ç»„åˆæŸ¥è¯¢æ’åº <code>order by</code> è¯­å¥å”¯ä¸€ï¼Œå¤šæ¡æŸ¥è¯¢ç»“æœçš„å¹¶é›†æ˜¯ä½œä¸ºä¸€ä¸ªæ•´ä½“è¾“å‡ºï¼›</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">vend_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">prod_price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="w"></span><span class="k">union</span><span class="w">
</span><span class="w"></span><span class="k">select</span><span class="w"> </span><span class="n">vend_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">vend_id</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span><span class="mi">1002</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- use only where
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">vend_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_id</span><span class="p">,</span><span class="w"> </span><span class="n">prod_price</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">products</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">prod_price</span><span class="w"> </span><span class="o">&lt;=</span><span class="mi">5</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">vend_in</span><span class="w"> </span><span class="p">(</span><span class="mi">1001</span><span class="p">,</span><span class="w"> </span><span class="mi">1002</span><span class="p">);</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-18-å…¨æ–‡æœ¬æœç´¢">Chapter 18: å…¨æ–‡æœ¬æœç´¢</h2>
<p>ç†è§£å…¨æ–‡æœ¬æœç´¢</p>
<ul>
<li>MySQL æ”¯æŒå¤šç§æ•°æ®åº“å¼•æ“ï¼Œå¦‚ MyISAM, InnoDB, ä½†<strong>å¹¶ä¸æ˜¯æ‰€æœ‰å¼•æ“éƒ½æ”¯æŒå…¨æ–‡æœç´¢</strong>ã€‚MyISAM æ”¯æŒå…¨æ–‡æœç´¢ï¼Œä½†æ˜¯ InnoDB ä¸æ”¯æŒã€‚</li>
<li>MySQL å…¨æ–‡æœ¬æœç´¢ä¸éœ€è¦æ¯æ¬¡åˆ†åˆ«æŸ¥çœ‹æ¯ä¸ªè¡Œï¼Œä¸éœ€è¦åˆ†åˆ«åˆ†æå’Œå¤„ç†æ¯ä¸ªè¯ï¼›</li>
<li>MySQL é€šè¿‡åˆ›å»ºæŒ‡å®šåˆ—ä¸­æ¯ä¸ªè¯çš„<strong>ç´¢å¼•</strong>ï¼Œæœç´¢å¯ä»¥é’ˆå¯¹è¿™äº›è¯è¿›è¡Œã€‚</li>
</ul>
<p>å¯ç”¨å…¨æ–‡æœç´¢</p>
<ul>
<li><code>create table table_name (..., FULLTEXT(col_name)) ENGINE=MyISAM;</code></li>
<li><strong>ä¸åœ¨å¯¼å…¥æ•°æ®æ—¶ä½¿ç”¨ <code>FULLTEXT</code></strong>ã€‚åœ¨å¯¼å…¥æ•°æ®æ—¶ä¸è¦å¯ç”¨ <code>FULLTEXT</code> ç´¢å¼•ï¼Œåº”å…ˆå¯¼å…¥æ‰€æœ‰æ•°æ®ï¼Œå†ä¿®æ”¹å®šä¹‰ <code>FULLTEXT</code>ã€‚ä¸€æ¬¡ç´¢å¼•æ‰€æœ‰è¡Œæ•°æ®æ—¶é—´å°äºå¯¼å…¥æ—¶é’ˆå¯¹æ¯è¡Œæ›´æ–°ç´¢å¼•ã€‚</li>
</ul>
<p>åœ¨å¢åŠ ã€æ›´æ–°æˆ–åˆ é™¤è¡Œæ—¶ï¼Œ ç´¢å¼•éšä¹‹è‡ªåŠ¨æ›´æ–°ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ç´¢å¼•åŠ å¿«äº†æ£€ç´¢é€Ÿåº¦ï¼Œä½†æ˜¯ç‰ºç‰²äº†æ•°æ®æ›´æ”¹çš„æ€§èƒ½ã€‚ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="o">##########################</span><span class="w">
</span><span class="w"> </span><span class="k">Create</span><span class="w"> </span><span class="n">productnotes</span><span class="w"> </span><span class="k">table</span><span class="w">
</span><span class="w"></span><span class="o">##########################</span><span class="w">
</span><span class="w"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">productnotes</span><span class="w">
</span><span class="w"></span><span class="p">(</span><span class="w">
</span><span class="w">  </span><span class="n">note_id</span><span class="w">    </span><span class="nb">int</span><span class="w">           </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="n">prod_id</span><span class="w">    </span><span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w">      </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="n">note_date</span><span class="w"> </span><span class="n">datetime</span><span class="w">       </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="n">note_text</span><span class="w">  </span><span class="nb">text</span><span class="w">          </span><span class="k">NULL</span><span class="w"> </span><span class="p">,</span><span class="w">
</span><span class="w">  </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">(</span><span class="n">note_id</span><span class="p">),</span><span class="w">
</span><span class="w">  </span><span class="n">FULLTEXT</span><span class="p">(</span><span class="n">note_text</span><span class="p">)</span><span class="w">
</span><span class="w"></span><span class="p">)</span><span class="w"> </span><span class="n">ENGINE</span><span class="o">=</span><span class="n">MyISAM</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>å…¨æ–‡æœç´¢ä½¿ç”¨</p>
<ul>
<li><code>where Match(col_name) Against('string');</code></li>
<li>å…¨æ–‡æœ¬æœç´¢åŒæ ·é»˜è®¤ä¸åŒºåˆ†å¤§å°å†™ï¼Œé™¤éä½¿ç”¨ <code>BINARY</code>ï¼›</li>
<li>å…¨æ–‡æœ¬æœç´¢ç»“æœé»˜è®¤æ’åºéµå¾ªé«˜ç­‰çº§ä¼˜å…ˆåŸåˆ™ï¼Œå¦‚æœç´¢å­—ç¬¦ä¸²åœ¨æ–‡æœ¬ä¸­å‡ºç°ä½ç½®ï¼›</li>
<li><strong>æŸ¥è¯¢æ‰©å±•</strong>ï¼Œè®¾æ³•<strong>æ”¾å®½</strong>æ‰€è¿”å›çš„å…¨æ–‡æœ¬æœç´¢ç»“æœçš„èŒƒå›´ã€‚
<ul>
<li>æ‰¾å‡ºå…¨æ–‡æœ¬æœç´¢åŒ¹é…è¡Œï¼›</li>
<li>æ£€æŸ¥åŒ¹é…è¡Œå¹¶é€‰æ‹©è¡Œä¸­æœ‰ç”¨è¯ï¼›</li>
<li>å†æ¬¡è¿›è¡Œå…¨æ–‡æœ¬æœç´¢ï¼Œä¸ä»…ä½¿ç”¨åŸæ¥çš„æ¡ä»¶ï¼Œè¿˜æ˜¯ç”¨æ‰€æœ‰æœ‰ç”¨çš„è¯ï¼›</li>
<li>ä½¿ç”¨<strong>æŸ¥è¯¢æ‰©å±•</strong>æ—¶ï¼ŒMySQL å¯¹æ•°æ®å’Œç´¢å¼•è¿›è¡Œ<strong>ä¸¤è¾¹æ‰«æ</strong>æ¥å®Œæˆæœç´¢ã€‚</li>
<li><code>Against('string' WITH QUERY EXPANSION);</code></li>
</ul>
</li>
</ul>
<p>æ‰©å±•æŸ¥è¯¢ç±»ä¼¼äºè”æƒ³è¯ï¼Œä»åŒ¹é…è¡Œä¸­è·å–ç›¸å…³è¯ï¼Œä»¥ç›¸å…³è¯å†æœç´¢ä¸€éç´¢å¼•ã€‚</p>
<p>å¸ƒå°”æ–‡æœ¬æ“ä½œ (boolean mode)</p>
<ul>
<li><code>Against('string' IN BOOLEAN MODE);</code></li>
<li><strong>å³ä¾¿æ²¡æœ‰ FULLTEXT ç´¢å¼•ä¹Ÿå¯ä»¥ä½¿ç”¨å¸ƒå°”æ–‡æœ¬æœç´¢</strong>ï¼›</li>
<li><code>+</code>, åŒ…å«ï¼Œè¯å¿…é¡»å­˜åœ¨ï¼›</li>
<li><code>-</code>, æ’é™¤ï¼Œä¸å…è®¸å­˜åœ¨ï¼›</li>
<li><code>&gt;</code>, åŒ…å«ï¼Œä¸”å¢åŠ ç­‰çº§å€¼ï¼Œéå¿…é¡»ï¼›</li>
<li><code>&lt;</code>, åŒ…å«ï¼Œä¸”å‡å°‘ç­‰çº§å€¼ï¼›</li>
<li><code>()</code>, ä½œä¸ºå­—è¡¨è¾¾å¼ï¼Œæˆä¸ºä¸€ä¸ªç»„ï¼›</li>
<li><code>~</code>, å–æ¶ˆä¸€ä¸ªè¯çš„æ’åºå€¼ï¼›</li>
<li><code>*</code>, è¯å°¾é€šé…ç¬¦ï¼›
<ul>
<li><code>match(text_note) against('heavy -rope*' in boolean mode</code>ï¼Œæ’é™¤ä»¥ <code>rope</code> å¼€å§‹çš„è¯ï¼Œéä»¥å…¶å¼€å§‹çš„è¡Œä¹‹æ„ï¼›</li>
</ul>
</li>
<li><code>&quot;&quot;</code>, å®šä¹‰çŸ­è¯­ï¼Œä»¥æ•´ä¸ªçŸ­è¯­ä¸ºåŒ¹é…ï¼›</li>
<li>å¸ƒå°”æ–¹å¼ä¸­ï¼Œç­‰çº§å€¼ä¸å½±å“è¾“å‡ºé¡ºåºï¼Œä¸æŒ‰ç­‰çº§å€¼é™åºæ’åºè¿”å›çš„è¡Œã€‚</li>
</ul>
<p>å¸ƒå°”æ–‡æœ¬æŸ¥è¯¢ç¤ºä¾‹</p>
<ul>
<li><code>Against('+rabbit +bait' in boolean mode);</code>ï¼Œä¸¤ä¸ªè¯å¿…é¡»åŒæ—¶å­˜åœ¨ï¼›</li>
<li><code>Against('rabbit bait' in boolean mode);</code>ï¼Œä¸¤ä¸ªè¯è‡³å°‘åŒ¹é…ä¸€ä¸ªï¼›</li>
<li><code>Against('&gt;rabbit &lt;carrot' in boolean mode)</code>, å¢åŠ å‰è€…ç­‰çº§ï¼Œé™ä½åè€…ç­‰çº§</li>
<li><code>Against('&quot;rabbit bait&quot;' in boolean mode);</code>ï¼Œ<code>&quot;rabbit bait&quot;</code> ä½œä¸ºä¸€ä¸ªè¯è¢«åŒ¹é…ï¼›</li>
<li><code>Against('+safe +(&lt;combination)' in boolean mode);</code>ï¼Œå¿…é¡»å­˜åœ¨ä¸”å‡å°ç­‰çº§å€¼ï¼›</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">select</span><span class="w"> </span><span class="n">note_id</span><span class="p">,</span><span class="w"> </span><span class="n">note_text</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">productnotes</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="n">note_text</span><span class="p">)</span><span class="w"> </span><span class="n">against</span><span class="p">(</span><span class="s1">&#39;rabbit&#39;</span><span class="p">);</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- æŸ¥çœ‹å…¨æ–‡æ£€ç´¢ä¼˜å…ˆçº§è¾“å‡º (è¯­æ³•å¤±æ•ˆ)
</span><span class="c1">-- use match in select but not in where
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">note_id</span><span class="p">,</span><span class="w"> </span><span class="n">note_text</span><span class="p">,</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="n">note_text</span><span class="p">)</span><span class="w"> </span><span class="n">against</span><span class="p">(</span><span class="s1">&#39;rabbit&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">rank</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">productnotes</span><span class="p">;</span><span class="w">
</span><span class="w">
</span><span class="w"></span><span class="c1">-- å¸ƒå°”æ¨¡å¼
</span><span class="c1"></span><span class="k">select</span><span class="w"> </span><span class="n">note_id</span><span class="p">,</span><span class="w"> </span><span class="n">note_text</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">productnotes</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="k">match</span><span class="p">(</span><span class="n">note_text</span><span class="p">)</span><span class="w"> </span><span class="n">against</span><span class="p">(</span><span class="s1">&#39;heavy -rope*&#39;</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nb">boolean</span><span class="w"> </span><span class="k">mode</span><span class="p">);</span><span class="w">
</span><span class="w"></span><span class="c1">-- against(&#39;+rabbit +bait&#39; in boolean mode);
</span></code></pre></td></tr></table>
</div>
</div><p>é¢å¤–è¯´æ˜</p>
<ul>
<li>å…¨æ–‡æœ¬ç´¢å¼•<strong>å¿½ç•¥çŸ­è¯ (3 ä¸ªæˆ– 3 ä¸ªä»¥ä¸‹å­—ç¬¦çš„è¯)</strong>ï¼›</li>
<li>å±äº MySQL å†…å»ºéç”¨è¯ (stopword) åˆ—è¡¨çš„è¯ä¸è¢«ç´¢å¼•ï¼›</li>
<li>é«˜é¢‘è¯ (&gt;50%) ä¸è¢«æœç´¢ï¼Œ<strong>50% è§„åˆ™ä¸é€‚ç”¨äº <code>in boolean mode</code></strong>ï¼›</li>
<li>è¡¨ä¸­è¡Œæ•°å°‘äº 3 è¡Œ (1~2 è¡Œ)ï¼Œä¸è¿”å›æœç´¢ç»“æœï¼Œå› ä¸ºæˆ–ä¸å‡ºç°æˆ–é«˜äº 50%ï¼›</li>
<li><strong>å…¨æ–‡æœç´¢å¿½ç•¥è¯ä¸­å•å¼•å·</strong>ï¼›</li>
<li>ä¸å…·æœ‰è¯åˆ†éš”ç¬¦è¯­è¨€ (æ—¥è¯­ã€æ±‰è¯­ç­‰) ä¸é€‚ç”¨äºå…¨æ–‡æ£€ç´¢ï¼›ï¼ˆé‚£æˆ‘è¿˜å­¦ä¸ªå±å•Šï¼‰</li>
<li><strong>å…¨æ–‡æœç´¢ä»…åœ¨ MyISAM å¼•æ“ä¸­å—æ”¯æŒ</strong>ï¼›</li>
</ul>
<p>é’ˆå¯¹éƒ¨åˆ†å­—ç¬¦ä¸²çš„ç´¢å¼•ï¼Œå¦‚é’ˆå¯¹åˆ—å€¼çš„å‰16ä¸ªå­—ç¬¦è¿›è¡Œç´¢å¼•</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">definition</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">dictionary</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">,</span><span class="n">definition</span><span class="p">(</span><span class="mi">16</span><span class="p">));</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><h2 id="chapter-19-æ’å…¥æ•°æ®">Chapter 19: æ’å…¥æ•°æ®</h2>
<p>æ¶‰åŠå†…å®¹</p>
<ul>
<li>æ’å…¥å®Œæ•´è¡Œï¼›</li>
<li>æ’å…¥è¡Œçš„ä¸€éƒ¨åˆ†ï¼›</li>
<li>æ’å…¥å¤šè¡Œï¼›</li>
<li><strong>æ’å…¥æŸäº›æŸ¥è¯¢ç»“æœ</strong>ï¼›</li>
</ul>
<p><code>INSERT INTO table_name VALUES(,,,);</code></p>
<ul>
<li><code>insert</code> è¯­å¥ä¸€èˆ¬æ²¡æœ‰è¾“å‡ºï¼›</li>
<li>æ’å…¥å€¼å¾—é¡ºåºæ ¹æ® <code>describe table_name</code> å†³å®šï¼›</li>
<li><code>auto_increment</code> è‡ªåŠ¨å¢é‡çš„å€¼è®¾ç½®ä¸º <code>null</code>ï¼Œç³»ç»Ÿä¼šè‡ªè¡Œä¸ºå…¶åˆ†é…å€¼ï¼›</li>
</ul>
<p>è‡ªå®šä¹‰å€¼çš„å¡«å……é¡ºåº</p>
<ul>
<li><code>insert into table_name(col_name_1,col_name_2) values(value_1,value_2);</code></li>
<li>ä¸ä¾èµ–äºè¡¨ä¸­åˆ—çš„æ¬¡åºï¼Œä½†æ˜¯ç›¸å¯¹ç¹ç</li>
</ul>
<p><strong>æ³¨</strong></p>
<ul>
<li>ä¸€èˆ¬ä¸è¦ä½¿ç”¨æ²¡æœ‰æ˜ç¡®ç»™å‡ºåˆ—çš„åˆ—è¡¨çš„ <code>insert</code> è¯­å¥ï¼›</li>
<li>æ’å…¥æ—¶æ€»æ˜¯æ˜ç¡®æŒ‡æ˜åˆ—ï¼›</li>
<li>æ²¡æœ‰æ˜ç¡®ç»™å‡ºåˆ—åæ—¶ï¼Œå¿…é¡»ç»™æ¯ä¸ªè¡¨åˆ—æä¾›ä¸€ä¸ªå€¼ï¼›è‹¥æ˜ç¡®ç»™å‡ºäº†åˆ—åï¼Œå€¼ (çš„æ•°ç›®) è¦ä¸åˆ—åå¯¹åº”ï¼›</li>
<li>çœç•¥åˆ—ï¼Œåˆ—å€¼å…è®¸ä¸º <code>null</code> å’Œåˆ—å­˜åœ¨é»˜è®¤å€¼çš„åˆ—ï¼Œå¯ä»¥åœ¨ <code>insert</code> è¯­å¥ä¸­çœç•¥ï¼›</li>
<li>é™ä½è¯­å¥ä¼˜å…ˆçº§ï¼Œä½¿å¾—åŒæ—¶è®¿é—®å®¢æˆ·çš„å…¶ä»–åŠ¨ä½œ (å¦‚æŸ¥è¯¢) ä¼˜å…ˆã€‚<code>insert LOW_PRIORITY into</code>ï¼›</li>
</ul>
<p>æ’å…¥å¤šè¡Œ</p>
<ul>
<li><code>insert into table(col, col) values(val, val), ();</code></li>
<li>å•æ¡ <code>insert</code> è¯­å¥å¤„ç†å¤šä¸ªæ’å…¥è¦æ¯”ä½¿ç”¨å¤šæ¡ <code>insert</code> è¯­å¥å¿«ï¼›</li>
</ul>
<p>æ’å…¥æ£€ç´¢ç»“æœ</p>
<ul>
<li><code>insert into oldtable(&lt;column names&gt;) select &lt;col&gt;, &lt;col&gt; from newtable;</code></li>
<li>æ£€ç´¢è¡¨ç»“æ„åº”ä¸æ–°è¡¨ç»“æ„ä¸€è‡´ (æˆ–è€…è‡³å°‘æ’å…¥åˆ—ä¸€è‡´)ï¼›</li>
<li>å¯ä»¥çœç•¥æ£€ç´¢è¡¨ä¸­çš„ä¸»é”®ï¼Œä»¥å…æ’å…¥é‡å¤ä¸»é”®ï¼Œè¿™æ ·ä¼šå¯¼è‡´å½“å‰æ•°æ®ï¼ŒåŠä¹‹åçš„æ•°æ®æ’å…¥å¤±è´¥ï¼›</li>
<li>MySQL ä¸å…³å¿ƒ <code>select</code> è¿”å›çš„åˆ—åï¼Œå®ƒä½¿ç”¨çš„æ˜¯åˆ—çš„ä½ç½®ï¼Œ<strong>å¯¹åº”ä½ç½®ä¸Šåˆ—å€¼ç±»å‹å¯¹åº”</strong>å³å¯ï¼›</li>
</ul>
<h2 id="chapter-20-æ›´æ–°å’Œåˆ é™¤æ•°æ®">Chapter 20: æ›´æ–°å’Œåˆ é™¤æ•°æ®</h2>
<p><code>update tablename set colname=value, col=val where colname2=value2;</code></p>
<ul>
<li><code>UPDATE</code> ä¸­ä½¿ç”¨å­æŸ¥è¯¢æ›´æ–°åˆ—æ•°æ®ï¼›</li>
<li><code>WHERE</code> å­å¥ä¸å­˜åœ¨æ—¶æ›´æ–°æ‰€æœ‰è¡Œï¼›</li>
<li><code>UPDATE IGNORE</code> åœ¨æ›´æ–°å¤šæ¡è¯­å¥æ—¶å¿½ç•¥é”™è¯¯è¡Œç»§ç»­æ“ä½œï¼›</li>
<li><strong>åˆ é™¤æŸåˆ—å€¼</strong>æ—¶æ›´æ–°å…¶å€¼ä¸º <code>NULL</code>ï¼›</li>
</ul>
<p><code>delete from tablename where colname=value;</code>, åˆ é™¤æ•´è¡Œï¼›</p>
<ul>
<li><code>truncate table tablename;</code> åˆ é™¤æ‰€æœ‰è¡Œï¼Œé€Ÿåº¦è¾ƒ<code>DELETE</code>å¿«(å®é™…æ˜¯åˆ é™¤è¡¨å¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªè¡¨ï¼Œè€Œä¸æ˜¯é€æ¡åˆ é™¤è¡¨ä¸­æ•°æ®)ï¼›</li>
</ul>
<p><code>drop table tablename;</code>, åˆ é™¤è¡¨ï¼›</p>
<p><strong>Tips</strong>:</p>
<ul>
<li><code>UPDATE</code>, <code>DELETE</code> å‰ä½¿ç”¨<code>SELECT</code>è¿›è¡Œæµ‹è¯•ï¼›</li>
<li>åˆ é™¤æ•°æ®æ—¶ä¸ºä¿é™©èµ·è§ï¼Œä½¿ç”¨<code>TRIGGER</code>å¤‡ä»½è¢«åˆ é™¤æ¡ç›®ï¼›TODO</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="k">update</span><span class="w"> </span><span class="n">customers</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">cust_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;The Fudds&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">cust_email</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;elmer@fudd.com&#39;</span><span class="w">
</span><span class="w"></span><span class="k">where</span><span class="w"> </span><span class="n">cust_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10005</span><span class="p">;</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">laggardkernel</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2018-03-29
        
    </span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">License</span>
    <span class="item-content"><a rel="license noopener" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">CC BY-NC-ND 4.0</a></span>
  </p>
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/mysql/">mysql</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/2018/mysql-crashcourse-03/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">MySQLå¿…çŸ¥å¿…ä¼šï¼š21-30</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/2018/mysql-crashcourse-01/">
            <span class="next-text nav-default">MySQLå¿…çŸ¥å¿…ä¼šï¼š01-10</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="disqus_thread"></div>
    <script type="text/javascript">
    (function() {
      
      
      if (window.location.hostname === 'localhost') return;

      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      var disqus_shortname = 'pseudocold';
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://stackoverflow.com/users/5101148" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://github.com/laggardkernel" class="iconfont icon-github" title="github"></a>
  <a href="https://blog.pseudocold.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2017 - 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>laggardkernel</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.db1482bc438a2df971757df91e110bb84b31bb77ca2141978d165fcf453c642e.js"></script>








</body>
</html>
